(this.webpackJsonpthe_phonebook=this.webpackJsonpthe_phonebook||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(1),a=t.n(c),o=t(15),r=t.n(o),u=t(6),i=t(4),s=t(3),l=t.n(s),d=t(0),b=function(e){var n=e.addNewName,t=e.newName,c=e.handleNameChange,a=e.newNumber,o=e.handleNumberChange;return Object(d.jsx)("div",{children:Object(d.jsxs)("form",{onSubmit:n,children:[Object(d.jsx)("div",{children:Object(d.jsxs)("label",{children:["name: ",Object(d.jsx)("input",{value:t,onChange:c})]})}),Object(d.jsx)("div",{children:Object(d.jsxs)("label",{children:["number: ",Object(d.jsx)("input",{value:a,onChange:o})]})}),Object(d.jsx)("button",{type:"submit",children:"add new name"})]})})},j=function(e){var n=e.name,t=e.number,c=e.id,a=e.removePerson;return Object(d.jsx)("div",{children:Object(d.jsxs)("p",{children:[n," ",t," ",Object(d.jsx)("button",{onClick:function(){return a(c)},children:"delete"})]})})},h=function(e){var n=e.filter,t=e.handleFilterChange,c=e.personal_label;return Object(d.jsx)("div",{children:Object(d.jsxs)("label",{children:[c,": ",Object(d.jsx)("input",{value:n,onChange:t})]})})},m="/api/persons",f=function(e){return l.a.post(m,e).then((function(e){return e.data}))},O=function(e){return l.a.put("".concat(m,"/").concat(e.id),e).then((function(e){return e.data}))},p=function(e){var n=e.message;return null===n?null:Object(d.jsx)("div",{className:"error",children:n})},v=function(){var e=Object(c.useState)([]),n=Object(i.a)(e,2),t=n[0],a=n[1],o=Object(c.useState)(""),r=Object(i.a)(o,2),s=r[0],m=r[1],v=Object(c.useState)(""),x=Object(i.a)(v,2),g=x[0],w=x[1],C=Object(c.useState)(""),N=Object(i.a)(C,2),k=N[0],S=N[1],L=Object(c.useState)(null),y=Object(i.a)(L,2),_=y[0],D=y[1];Object(c.useEffect)((function(){l.a.get("/api/persons").then((function(e){console.log("persons response successful"),a(e.data)})).catch((function(e){console.log("error with fetching persons data in App.js:27"),console.log(e)}))}),[]);var E=function(e){var n=t.find((function(n){return n.id===e}));if(window.confirm("Do you want to remove '".concat(n.name,"'?"))){var c=t.filter((function(n){return n.id!==e}));l.a.delete("/persons/".concat(e)).catch((function(e){console.log(e),D("".concat(n.name," ").concat(n.number," has already been deleted")),setTimeout((function(){D(null)}),5e3)})),a(c)}},P=k?t.filter((function(e){return e.name.toLowerCase().includes(k.toLowerCase())})):[];return Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Phonebook"}),Object(d.jsx)(h,{filter:k,handleFilterChange:function(e){S(e.target.value)},personal_label:"Enter a name to search"}),P.map((function(e){return Object(d.jsx)(j,{name:e.name,number:e.number})})),Object(d.jsx)("h1",{children:"Add a New"}),Object(d.jsx)(p,{message:_}),Object(d.jsx)(b,{addNewName:function(e){e.preventDefault();var n=t.find((function(e){return e.name.toLowerCase()===s.toLowerCase()}))||"no duplicates";if(console.log("isDuplicateName:",n),"no duplicates"===n){var c={name:s,number:g};f(c).then((function(e){a(t.concat(e)),D("".concat(c.name," ").concat(c.number," has been added")),setTimeout((function(){D(null)}),5e3)})).catch((function(e){return console.log(e)})),m(""),w("")}else{window.confirm("".concat(s," is already added to the phonebook, replace the old number with ").concat(g,"?"))&&O(Object(u.a)(Object(u.a)({},n),{},{number:g})).then((function(e){console.log("updated person:",e),a(t.map((function(n){return n.name.toLowerCase()!==s.toLowerCase()?n:e})))})).catch((function(e){return console.log(e)})),m(""),w("")}},newName:s,handleNameChange:function(e){m(e.target.value)},newNumber:g,handleNumberChange:function(e){w(e.target.value)}}),Object(d.jsx)("h1",{children:"Numbers"}),t.map((function(e){return Object(d.jsx)(j,{name:e.name,number:e.number,removePerson:E,id:e.id})}))]})};t(39);r.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(v,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.d6e08a51.chunk.js.map