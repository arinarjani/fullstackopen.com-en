{"version":3,"sources":["components/PersonForm.js","components/Persons.js","components/Filter.js","services/person.js","components/Notification.js","App.js","index.js"],"names":["PersonForm","addNewName","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","value","onChange","type","Person","name","number","id","removePerson","onClick","Filter","filter","handleFilterChange","personal_label","baseURL","person","axios","post","then","response","data","put","Notification","message","className","App","useState","persons","setPersons","setNewName","setNewNumber","setFilter","errorMessage","setErrorMessage","useEffect","get","console","log","catch","error","personToRemove","find","window","confirm","arrayWithRemovedPersons","delete","setTimeout","filteredPersons","toLowerCase","includes","event","target","map","preventDefault","isDuplicateName","personServices","newPerson","concat","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d6e08a51.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst PersonForm = ({ \r\n    addNewName, \r\n    newName, \r\n    handleNameChange,\r\n    newNumber, \r\n    handleNumberChange\r\n}) => {\r\n    return (\r\n        <div>\r\n            <form onSubmit={addNewName}>\r\n                <div>\r\n                <label>\r\n                    name: <input value={newName} onChange={handleNameChange} />\r\n                </label>\r\n                </div>\r\n                <div>\r\n                <label>\r\n                    number: <input value={newNumber} onChange={handleNumberChange} />\r\n                </label>\r\n                </div>\r\n                <button type=\"submit\">add new name</button>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PersonForm;","import React from 'react';\r\n\r\nconst Person = ({ name, number, id, removePerson }) => {\r\n    return (\r\n        <div>\r\n            <p>{name} {number} <button onClick={() => removePerson(id)}>delete</button></p>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Person;","import React from 'react';\r\n\r\nconst Filter = ({ filter, handleFilterChange, personal_label }) => {\r\n    return (\r\n        <div>\r\n            <label>\r\n            {personal_label}: <input value={filter} onChange={handleFilterChange} />\r\n            </label>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Filter;","import axios from 'axios';\r\n\r\n// url for the server with all the persons data\r\nconst /** string */ baseURL = '/api/persons';\r\n\r\n/**\r\n * Adds a person and associated number to the db\r\n * \r\n * @param {person} A person with associated number being added to the db\r\n * @returns {Promise} person data\r\n */\r\nconst createPerson = (person) => {\r\n    const request = axios.post(baseURL, person);\r\n    return request.then(response => response.data);\r\n}\r\n\r\n/**\r\n * Updates a person in the db according to their id\r\n * \r\n * @param {person} A person with associated id in the db\r\n * @returns {Promise} updated persons data\r\n */\r\nconst updatePerson = (person) => {\r\n    const request = axios.put(`${baseURL}/${person.id}`, person);\r\n    return request.then(response => response.data);\r\n}\r\n\r\nexport default { createPerson, updatePerson };","import React from 'react';\r\n\r\nconst Notification = ({ message }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n  \r\n    return (\r\n      <div className=\"error\">\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  export default Notification;","import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport PersonForm from './components/PersonForm.js';\r\nimport Person from './components/Persons.js';\r\nimport Filter from './components/Filter.js';\r\nimport personServices from './services/person.js';\r\nimport Notification from './components/Notification.js';\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons ] = useState([]);\r\n  const [ newName, setNewName ] = useState('');\r\n  const [ newNumber, setNewNumber ] = useState('');\r\n  const [ filter, setFilter ] = useState('');\r\n  const [ errorMessage, setErrorMessage ] = useState(null);\r\n\r\n  // 2.11: set the initial state of the application with useEffect and axios\r\n  useEffect(() => {\r\n    // grab persons\r\n    axios\r\n      .get('/api/persons')\r\n      .then(response => {\r\n        console.log('persons response successful');\r\n        setPersons(response.data);\r\n      }).catch(error => {\r\n        console.log('error with fetching persons data in App.js:27')\r\n        console.log(error);\r\n      });\r\n\r\n      \r\n  }, []);\r\n  \r\n  // 2.6: allow the user to add a name to persons\r\n  const addNewName = (event) => {\r\n    event.preventDefault();\r\n\r\n    // 2.7: prevent the user from adding duplicate names to persons \r\n    // if this is [], then there is no duplicate names, but if it is [<data>]\r\n    // then the name being added is a duplicate\r\n    const isDuplicateName = persons.find(name => name.name.toLowerCase() === newName.toLowerCase()) || 'no duplicates';\r\n    console.log('isDuplicateName:', isDuplicateName)\r\n    if ( isDuplicateName === 'no duplicates' ) {\r\n      // object of the new person being added to the db\r\n      const person = {\r\n        name: newName,\r\n        number: newNumber\r\n      };\r\n\r\n      // call f(x) to add person/number to db\r\n      personServices\r\n        .createPerson(person)\r\n        .then(newPerson => {\r\n          setPersons(persons.concat(newPerson));\r\n          setErrorMessage(`${person.name} ${person.number} has been added`);\r\n          setTimeout(() => {\r\n            setErrorMessage(null)\r\n          }, 5000);\r\n        })\r\n        .catch(error => console.log(error));\r\n      \r\n      setNewName('');\r\n      setNewNumber('');\r\n    } else {\r\n      // the name is a duplicate, so prompt the user to \r\n      // verify changing the number is what they want to do\r\n      const result = window.confirm(`${newName} is already added to the phonebook, replace the old number with ${newNumber}?`);\r\n      \r\n      if (result) {\r\n        personServices\r\n          .updatePerson({...isDuplicateName, number: newNumber})\r\n          .then(response => {\r\n            console.log('updated person:', response);\r\n            setPersons(persons.map(person => {\r\n              return person.name.toLowerCase() !== newName.toLowerCase() ? person : response\r\n            }))\r\n           })\r\n           .catch(error => console.log(error));\r\n      }\r\n\r\n      setNewName('');\r\n      setNewNumber('');\r\n    }\r\n  };\r\n\r\n\r\n  // 2.6: allow the user to add a name\r\n  /**\r\n   * Handle input text changes for add a name by user and set the\r\n   * correct state\r\n   *\r\n   * @param {Object} event The data input by the user\r\n   */\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value);\r\n  };\r\n\r\n  // 2.8: adding phone numbers to a person\r\n  /**\r\n   * Handle input text changes for add a number by user and set the\r\n   * correct state\r\n   *\r\n   * @param {Object} event The data input by the user\r\n   */\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value);\r\n  };\r\n\r\n  // 2.9: allow the user to search for names in persons\r\n  /**\r\n   * Handle input text changes for search for a name by user and set the\r\n   * correct state\r\n   *\r\n   * @param {Object} event The data input by the user\r\n   */\r\n  const handleFilterChange = (event) => {\r\n    setFilter(event.target.value);\r\n  };\r\n\r\n  /**\r\n   * 2.17: Handles the deletion of a person by using their id\r\n   *\r\n   * @param {Number} the id of the person to be deleted\r\n   */\r\n  const removePerson = (id) => {\r\n    // find the person who's id matches the id in persons state\r\n    const /** Object */ personToRemove = persons.find(person => person.id === id);\r\n\r\n    // true if clicked 'ok', false if clicked 'cancel'\r\n    const /** Bool */ result = window.confirm(`Do you want to remove '${personToRemove.name}'?`);\r\n\r\n    if( result ) {\r\n      // filtered array without the person's who has the id of the @param {id}\r\n      const /** Array */ arrayWithRemovedPersons = persons.filter(person => person.id !== id);\r\n\r\n      // delete a person with ${id} from the db\r\n      axios.delete(`/persons/${id}`)\r\n        .catch(error => {\r\n          console.log(error);\r\n          setErrorMessage(`${personToRemove.name} ${personToRemove.number} has already been deleted`);\r\n          setTimeout(() => {\r\n            setErrorMessage(null)\r\n          }, 5000);\r\n        });\r\n      \r\n      setPersons(arrayWithRemovedPersons);\r\n    }\r\n  }\r\n  \r\n  const filteredPersons = filter ? persons.filter(person => person.name.toLowerCase().includes(filter.toLowerCase())) : [];\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      {/* 2.9: allow the user to search for a name in persons */}\r\n      <Filter\r\n        filter={filter}\r\n        handleFilterChange={handleFilterChange}\r\n        personal_label={'Enter a name to search'}\r\n      />\r\n      {/* https://www.reddit.com/r/reactjs/comments/gjr1rq/usestate_filtering_names_always_one_step_behind/ */}\r\n      {/* https://stackoverflow.com/questions/55600870/hooks-setstate-always-one-step-behind */}\r\n      {/* search: 'why is my state 1 step behind reactjs' */}\r\n      {/* show persons filtered */}\r\n      {filteredPersons.map(person => (\r\n        <Person name={person.name} number={person.number} />\r\n      ))}\r\n      {/* 2.6: adding names to the phonebook with a form */}\r\n      <h1>Add a New</h1>\r\n      <Notification message={errorMessage} />\r\n      <PersonForm\r\n        addNewName={addNewName}\r\n        newName={newName}\r\n        handleNameChange={handleNameChange}\r\n        newNumber={newNumber}\r\n        handleNumberChange={handleNumberChange}\r\n      />\r\n      <h1>Numbers</h1>\r\n      {/* show all persons not filtered */}\r\n      {persons.map(person => (\r\n        <Person name={person.name} number={person.number} removePerson={removePerson} id={person.id} />\r\n      ))}\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default App","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport './index.css'\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}